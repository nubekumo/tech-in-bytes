{% extends "base.html" %} 
{% load static %} {% block title %}Account Settings - Tech Bloggers {% endblock %} 
{% block extra_head %}{% endblock %} {% block content %}

<div class="settings-container">
  <!-- Header -->
  <div class="settings-header">
    <h1>Account Settings</h1>
  </div>

  <!-- Tabs -->
  <div class="settings-tabs">
    <div class="settings-tab active" data-tab="profile">Profile</div>
    <div class="settings-tab" data-tab="account">Account</div>
    <div class="settings-tab" data-tab="security">Security</div>
    <div class="settings-tab" data-tab="danger">Danger Zone</div>
  </div>

  <!-- Content -->
  <div class="settings-content">
    <!-- Profile Tab -->
    <div class="tab-panel active" id="profile-panel">
      <form
        method="post"
        action="{% url 'accounts:update_profile' %}"
        enctype="multipart/form-data"
        id="profile-form"
      >
        {% csrf_token %}

        <!-- Avatar Upload -->
        <div class="avatar-upload">
          <div class="avatar-preview" id="avatar-upload-zone">
            {% if user.profile.avatar %}
            <img
              src="{{ user.profile.avatar.url }}"
              alt="Profile avatar"
              id="avatar-preview-img"
            />
            {% else %}
            <div class="avatar-placeholder" id="avatar-placeholder">
              Upload your Picture
            </div>
            {% endif %}
            <div class="avatar-overlay">
              <i class="fas fa-camera"></i>
              <span>Change Avatar</span>
            </div>
            {{ form.avatar }}
          </div>
        </div>

        <!-- Bio -->
        <div class="form-group">
          <label for="id_bio">Bio</label>
          {{ form.bio }} {% if form.bio.errors %}
          <div class="form-feedback error">{{ form.bio.errors.0 }}</div>
          {% endif %}
        </div>

        <button type="submit" class="btn btn--primary">Save Profile</button>
      </form>
    </div>

    <!-- Account Tab -->
    <div class="tab-panel" id="account-panel">
      <form
        method="post"
        action="{% url 'accounts:update_email' %}"
        id="email-form"
      >
        {% csrf_token %}
        <div class="form-group">
          <label for="id_email">Email Address</label>
          {{ email_form.email }} {% if email_form.email.errors %}
          <div class="form-feedback error">{{ email_form.email.errors.0 }}</div>
          {% endif %}
        </div>

        <button type="submit" class="btn btn--primary">Update Email</button>
      </form>
    </div>

    <!-- Security Tab -->
    <div class="tab-panel" id="security-panel">
      <form
        method="post"
        action="{% url 'accounts:update_password' %}"
        id="password-form"
      >
        {% csrf_token %}

        <div class="form-group">
          <label for="old_password">Current Password</label>
          <div class="password-field">
            <input
              type="password"
              name="old_password"
              id="old_password"
              class="form-control"
              required
            />
            <button
              type="button"
              class="password-toggle"
              data-target="old_password"
            >
              <i class="far fa-eye"></i>
            </button>
          </div>
        </div>

        <div class="form-group">
          <label for="new_password1">New Password</label>
          <div class="password-field">
            <input
              type="password"
              name="new_password1"
              id="new_password1"
              class="form-control"
              required
            />
            <button
              type="button"
              class="password-toggle"
              data-target="new_password1"
            >
              <i class="far fa-eye"></i>
            </button>
          </div>

          <div class="password-requirements">
            <div class="requirement-item" data-requirement="length">
              <i class="fas fa-circle"></i>
              <span>At least 8 characters long</span>
            </div>
            <div class="requirement-item" data-requirement="uppercase">
              <i class="fas fa-circle"></i>
              <span>Contains uppercase letter</span>
            </div>
            <div class="requirement-item" data-requirement="lowercase">
              <i class="fas fa-circle"></i>
              <span>Contains lowercase letter</span>
            </div>
            <div class="requirement-item" data-requirement="number">
              <i class="fas fa-circle"></i>
              <span>Contains number</span>
            </div>
            <div class="requirement-item" data-requirement="special">
              <i class="fas fa-circle"></i>
              <span>Contains special character</span>
            </div>
          </div>
        </div>

        <div class="form-group">
          <label for="new_password2">Confirm New Password</label>
          <div class="password-field">
            <input
              type="password"
              name="new_password2"
              id="new_password2"
              class="form-control"
              required
            />
            <button
              type="button"
              class="password-toggle"
              data-target="new_password2"
            >
              <i class="far fa-eye"></i>
            </button>
          </div>
        </div>

        <button type="submit" class="btn btn--primary">Change Password</button>
      </form>
    </div>

    <!-- Danger Zone Tab -->
    <div class="tab-panel" id="danger-panel">
      <div class="danger-zone">
        <h3>Delete Account</h3>
        <p>
          Once you delete your account, there is no going back. Please be
          certain.
        </p>
        <div class="form-group">
          <a href="{% url 'accounts:delete_account' %}" class="btn btn--danger">
            <i class="fas fa-trash-alt"></i> Delete My Account
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
